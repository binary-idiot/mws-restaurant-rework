{"version":3,"sources":["review.js"],"names":["restaurant","review","worker","id","document","addEventListener","event","SWHelper","registerServiceWorker","restaurant_id","Helper","getParameterByName","this","Worker","onmessage","handleWorkerMessage","getRestaurant","getReview","requestAnimationFrame","fillFormTitle","msg","data","content","msgData","retrieved","self","fillBreadcrumb","fillRestaurantName","fillReviewForm","postMessage","action","getElementById","innerHTML","name","title","type","value","rating","comments","breadcrumb","liRestaurant","createElement","aRestaurant","href","urlForRestaurant","appendChild","liReview","handleFormSubmit","console","log"],"mappings":"AAAA,IAAIA,WACHC,OACAC,OACAC,GAEAC,SAASC,iBAAiB,mBAAoBC,IAC7CC,SAASC,wBAET,MAAMC,EAAgBC,OAAOC,mBAAmB,cAChDC,KAAKT,GAAKO,OAAOC,mBAAmB,MAEpCC,KAAKV,OAAS,IAAIW,OAAO,2BACzBD,KAAKV,OAAOY,UAAYC,oBAExBC,cAAcP,GAEXG,KAAKT,IACPc,UAAUL,KAAKT,IAEhBe,sBAAsBC,iBAGvBJ,oBAAsBK,CAAAA,IACrB,MAAMC,EAAOD,EAAIC,KACXC,EAAUD,EAAKE,QAErB,OAAOF,EAAKG,WACX,IAAK,aACJC,KAAKzB,WAAasB,EAClBJ,sBAAsBQ,gBACtBR,sBAAsBS,oBACtB,MACD,IAAK,SACJF,KAAKxB,OAASqB,EACdJ,sBAAsBU,mBAKzBZ,cAAgB,EAACb,EAAID,EAASuB,KAAKvB,UAClCA,EAAO2B,YAAY,CAACC,OAAQ,gBAAiB3B,GAAGA,MAGjDc,UAAY,EAACd,EAAID,EAASuB,KAAKvB,UAC9BA,EAAO2B,YAAY,CAACC,OAAO,YAAa3B,GAAGA,MAG5CwB,mBAAqB,MACPvB,SAAS2B,eAAe,mBAChCC,UAAYpB,KAAKZ,WAAWiC,OAGlCd,cAAgB,MACf,MAAMe,EAAQ9B,SAAS2B,eAAe,cAChCI,EAAQvB,KAAO,GAAI,SAAW,SAEpCsB,EAAMF,aAAeG,aAItBP,eAAiB,MAChB,MAAM3B,EAASW,KAAKX,OAEPG,SAAS2B,eAAe,eAChCK,MAAQnC,EAAOgC,KAEL7B,SAAS2B,eAAe,iBAChCK,MAAQnC,EAAOoC,OAELjC,SAAS2B,eAAe,mBAChCK,MAAQnC,EAAOqC,WAGzBZ,eAAiB,MACjB,MAAM1B,EAAayB,KAAKzB,WAElBuC,EAAanC,SAAS2B,eAAe,cACrCS,EAAepC,SAASqC,cAAc,MAEtCC,EAActC,SAASqC,cAAc,KAC3CC,EAAYC,KAAOjC,OAAOkC,iBAAiB5C,GAC3C0C,EAAYV,UAAYhC,EAAWiC,KAEnCO,EAAaK,YAAYH,GAEzBH,EAAWM,YAAYL,GAEvB,MAAMM,EAAW1C,SAASqC,cAAc,MACxCK,EAASd,UAAY,SAErBO,EAAWM,YAAYC,KAIxBC,iBAAmB,MAClBC,QAAQC,IAAI","file":"../js/review.js","sourcesContent":["let restaurant,\r\n\treview,\r\n\tworker,\r\n\tid;\r\n\r\n\tdocument.addEventListener('DOMContentLoaded', event =>{\r\n\t\tSWHelper.registerServiceWorker();\r\n\r\n\t\tconst restaurant_id = Helper.getParameterByName('restaurant');\r\n\t\tthis.id = Helper.getParameterByName('id');\r\n\r\n\t\tthis.worker = new Worker('/js/restaurantWorker.js');\r\n\t\tthis.worker.onmessage = handleWorkerMessage;\r\n\r\n\t\tgetRestaurant(restaurant_id);\r\n\r\n\t\tif(this.id)\r\n\t\t\tgetReview(this.id);\r\n\t\t\r\n\t\trequestAnimationFrame(fillFormTitle);\r\n\t})\r\n\r\n\thandleWorkerMessage = msg => {\r\n\t\tconst data = msg.data;\r\n\t\tconst content = data.msgData;\r\n\r\n\t\tswitch(data.retrieved){\r\n\t\t\tcase 'restaurant':\r\n\t\t\t\tself.restaurant = content;\r\n\t\t\t\trequestAnimationFrame(fillBreadcrumb);\r\n\t\t\t\trequestAnimationFrame(fillRestaurantName);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'review':\r\n\t\t\t\tself.review = content;\r\n\t\t\t\trequestAnimationFrame(fillReviewForm);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tgetRestaurant = (id, worker = self.worker) => {\r\n\t\tworker.postMessage({action: 'getRestaurant', id:id})\r\n\t}\r\n\r\n\tgetReview = (id, worker = self.worker) =>{\r\n\t\tworker.postMessage({action:'getReview', id:id});\r\n\t}\r\n\t\r\n\tfillRestaurantName = () => {\r\n\t\tconst name = document.getElementById('restaurant-name');\r\n\t\tname.innerHTML = this.restaurant.name;\r\n\t}\r\n\r\n\tfillFormTitle = () => {\r\n\t\tconst title = document.getElementById('form-title');\r\n\t\tconst type = (this.id) ? 'Update' : 'Create';\r\n\r\n\t\ttitle.innerHTML = `${type} review`;\r\n\r\n\t}\r\n\r\n\tfillReviewForm = () => {\r\n\t\tconst review = this.review;\r\n\r\n\t\tconst name = document.getElementById('review-name');\r\n\t\tname.value = review.name;\r\n\r\n\t\tconst rating = document.getElementById('review-rating');\r\n\t\trating.value = review.rating;\r\n\r\n\t\tconst comments = document.getElementById('review-comments');\r\n\t\tcomments.value = review.comments;\r\n\t}\r\n\r\n\tfillBreadcrumb = () => {\r\n\tconst restaurant = self.restaurant;\r\n\r\n\tconst breadcrumb = document.getElementById('breadcrumb');\r\n\tconst liRestaurant = document.createElement('li');\r\n\r\n\tconst aRestaurant = document.createElement('a');\r\n\taRestaurant.href = Helper.urlForRestaurant(restaurant);\r\n\taRestaurant.innerHTML = restaurant.name;\r\n\r\n\tliRestaurant.appendChild(aRestaurant);\r\n\r\n\tbreadcrumb.appendChild(liRestaurant);\r\n\r\n\tconst liReview = document.createElement('li');\r\n\tliReview.innerHTML = 'Review';\r\n\r\n\tbreadcrumb.appendChild(liReview);\r\n\r\n}\r\n\r\nhandleFormSubmit = () => {\r\n\tconsole.log(\"Form submitted\");\r\n}"]}