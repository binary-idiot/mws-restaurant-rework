{"version":3,"sources":["details.js"],"names":["restaurant","worker","document","addEventListener","event","this","Worker","onmessage","handleWorkerMessage","getRestaurant","getParameterByName","msg","data","content","msgData","retrieved","self","fillRestaurantHTML","fillBreadcrumb","name","url","window","location","href","replace","results","RegExp","exec","decodeURIComponent","id","postMessage","action","getElementById","innerHTML","address","image","imgSrc","Helper","imageUrlForRestaurant","className","src","srcset","size","alt","cuisine_type","operating_hours","fillRestaurantHoursHTML","operatingHours","hours","key","row","createElement","day","appendChild","time","oh","breadcrumb","li"],"mappings":"AAAA,IAAIA,WACHC,OAEAC,SAASC,iBAAiB,mBAAoBC,IAE7CC,KAAKJ,OAAS,IAAIK,OAAO,+BACzBD,KAAKJ,OAAOM,UAAYC,oBACxBC,cAAcC,mBAAmB,SAOnCF,oBAAsBG,CAAAA,IACrB,MAAMC,EAAOD,EAAIC,KACXC,EAAUD,EAAKE,QAErB,OAAOF,EAAKG,WACX,IAAK,aACJC,KAAKhB,WAAaa,EAClBI,qBACAC,oBAKHR,mBAAqB,EAACS,EAAMC,KACrBA,IAAKA,EAAMC,OAAOC,SAASC,MAC9BJ,EAAOA,EAAKK,QAAQ,UAAW,QAC/B,IACIC,EADQ,IAAIC,OAAO,OAASP,EAAO,qBACnBQ,KAAKP,GACzB,OAAKK,EACAA,EAAQ,GACNG,mBAAmBH,EAAQ,GAAGD,QAAQ,MAAO,MAD5B,GADH,OAUzBf,cAAgB,EAACoB,EAAI5B,EAASe,KAAKf,UAClCA,EAAO6B,YAAY,CAACC,OAAQ,gBAAiBF,GAAIA,MAGlDZ,mBAAqB,EAACjB,EAAagB,KAAKhB,cAC1BE,SAAS8B,eAAe,mBAChCC,UAAYjC,EAAWmB,KAEZjB,SAAS8B,eAAe,sBAChCC,UAAYjC,EAAWkC,QAE/B,MAAMC,EAAQjC,SAAS8B,eAAe,kBAChCI,EAAUC,OAAOC,sBAAsBtC,GAC7CmC,EAAMI,UAAY,iBAClBJ,EAAMK,OAAUJ,cAChBD,EAAMM,UAAaL,qBAA4BA,sBAA6BA,mBAC5ED,EAAMO,KAAO,uDACbP,EAAMQ,IAAM3C,EAAW2C,IAEPzC,SAAS8B,eAAe,sBAChCC,UAAYjC,EAAW4C,aAG3B5C,EAAW6C,iBACfC,4BAMDA,wBAA0B,EAACC,EAAiB/B,KAAKhB,WAAW6C,mBAC3D,MAAMG,EAAQ9C,SAAS8B,eAAe,oBACtC,IAAK,IAAIiB,KAAOF,EAAgB,CAC/B,MAAMG,EAAMhD,SAASiD,cAAc,MAE7BC,EAAMlD,SAASiD,cAAc,MACnCC,EAAInB,UAAYgB,EAChBC,EAAIG,YAAYD,GAEhB,MAAME,EAAOpD,SAASiD,cAAc,MAC9BI,EAAKR,EAAeE,GAAKzB,QAAQ,IAAK,QAC5C8B,EAAKrB,UAAYsB,EACjBL,EAAIG,YAAYC,GAEhBN,EAAMK,YAAYH,MAIpBhC,eAAiB,EAAClB,EAAagB,KAAKhB,cACnC,MAAMwD,EAAatD,SAAS8B,eAAe,cACrCyB,EAAKvD,SAASiD,cAAc,MAClCM,EAAGxB,UAAYjC,EAAWmB,KAC1BqC,EAAWH,YAAYI","file":"../js/details.js","sourcesContent":["let restaurant,\r\n\tworker;\r\n\r\n\tdocument.addEventListener('DOMContentLoaded', event => {\r\n\t\t// worker to handle all restaurant retrieval\r\n\t\tthis.worker = new Worker('/src/js/restaurantWorker.js');\r\n\t\tthis.worker.onmessage = handleWorkerMessage;\r\n\t\tgetRestaurant(getParameterByName('id'));\r\n\t})\r\n\r\n/**\r\n * Handle messages from worker thread\r\n * @param  {Message} msg Message from worker thread\r\n */\r\nhandleWorkerMessage = msg => {\r\n\tconst data = msg.data;\r\n\tconst content = data.msgData;\r\n\r\n\tswitch(data.retrieved){\r\n\t\tcase 'restaurant':\r\n\t\t\tself.restaurant = content;\r\n\t\t\tfillRestaurantHTML();\r\n\t\t\tfillBreadcrumb();\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\ngetParameterByName = (name, url) => {\r\n  if (!url) url = window.location.href;\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\n/**\r\n * Have the worker retrieve a restaurant\r\n * @param  {RestaurantWorker} worker worker to handle request\r\n * @param  {Int} id     id of restaurant to retrieve\r\n */\r\ngetRestaurant = (id, worker = self.worker) => {\r\n\tworker.postMessage({action: 'getRestaurant', id: id});\r\n}\r\n\r\nfillRestaurantHTML = (restaurant = self.restaurant) => {\r\n\tconst name = document.getElementById('restaurant-name');\r\n\tname.innerHTML = restaurant.name;\r\n\r\n\tconst address = document.getElementById('restaurant-address');\r\n\taddress.innerHTML = restaurant.address;\r\n\r\n\tconst image = document.getElementById('restaurant-img');\r\n\tconst imgSrc =  Helper.imageUrlForRestaurant(restaurant);\r\n\timage.className = 'restaurant-img'\r\n\timage.src = `${ imgSrc }-small.jpg`;\r\n\timage.srcset = `${ imgSrc }-small.jpg 300w, ${ imgSrc }-medium.jpg 600w, ${ imgSrc }-large.jpg 800w`;\r\n\timage.size = '(max-width: 767) calc(100% - 30px), calc(50% - 30px)';\r\n\timage.alt = restaurant.alt;\r\n\r\n\tconst cuisine = document.getElementById('restaurant-cuisine');\r\n\tcuisine.innerHTML = restaurant.cuisine_type;\r\n\r\n\t// fill operating hours\r\n\tif (restaurant.operating_hours) {\r\n\tfillRestaurantHoursHTML();\r\n\t}\r\n\r\n\t//reviews\r\n}\r\n\r\nfillRestaurantHoursHTML = (operatingHours = self.restaurant.operating_hours) => {\r\n\tconst hours = document.getElementById('restaurant-hours');\r\n\tfor (let key in operatingHours) {\r\n\t\tconst row = document.createElement('tr');\r\n\r\n\t\tconst day = document.createElement('td');\r\n\t\tday.innerHTML = key;\r\n\t\trow.appendChild(day);\r\n\r\n\t\tconst time = document.createElement('td');\r\n\t\tconst oh = operatingHours[key].replace(/,/, '<br>');\r\n\t\ttime.innerHTML = oh;\r\n\t\trow.appendChild(time);\r\n\r\n\t\thours.appendChild(row);\r\n\t}\r\n}\r\n\r\nfillBreadcrumb = (restaurant = self.restaurant) => {\r\n\tconst breadcrumb = document.getElementById('breadcrumb');\r\n\tconst li = document.createElement('li');\r\n\tli.innerHTML = restaurant.name;\r\n\tbreadcrumb.appendChild(li);\r\n}"]}