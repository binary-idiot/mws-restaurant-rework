let restaurant,worker;var newMap;document.addEventListener("DOMContentLoaded",e=>{this.worker=new Worker("/src/js/restaurantWorker.js"),this.worker.onmessage=handleWorkerMessage,getRestaurant(getParameterByName("id"))}),handleWorkerMessage=(e=>{const t=e.data,a=t.msgData;switch(t.retrieved){case"restaurant":self.restaurant=a,requestAnimationFrame(initMap),requestAnimationFrame(fillRestaurantHTML)}}),initMap=(()=>{const e=self.restaurant;self.newMap=L.map("map",{center:[e.latlng.lat,e.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYmluYXJ5aWRpb3QiLCJhIjoiY2pqMzZjNWRtMWF2YTNrbXRsb2VueGlydyJ9.mkjp31-552zW210Dz1PUcQ",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),Helper.mapMarkerForRestaurant(self.restaurant,self.newMap)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}),getRestaurant=((e,t=self.worker)=>{t.postMessage({action:"getRestaurant",id:e})}),fillRestaurantHTML=(()=>{const e=self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img"),a=Helper.imageUrlForRestaurant(e);t.className="restaurant-img",t.src=`${a}-small.jpg`,t.srcset=`${a}-small.jpg 300w, ${a}-medium.jpg 600w, ${a}-large.jpg 800w`,t.size="(max-width: 767) calc(100% - 30px), calc(50% - 30px)",t.alt=e.alt,document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillBreadcrumb()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let a in e){const r=document.createElement("tr"),n=document.createElement("td");n.innerHTML=a,r.appendChild(n);const s=document.createElement("td"),o=e[a].replace(/,/,"<br>");s.innerHTML=o,r.appendChild(s),t.appendChild(r)}}),fillBreadcrumb=(()=>{const e=self.restaurant,t=document.getElementById("breadcrumb"),a=document.createElement("li");a.innerHTML=e.name,t.appendChild(a)});
//# sourceMappingURL=../maps/details.js.map
