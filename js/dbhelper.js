importScripts("//rawgit.com/jakearchibald/idb/master/lib/idb.js");var restaurantDb=idb.open("restaurants-db",4,e=>{switch(e.oldVersion){case 0:e.createObjectStore("restaurant",{keyPath:"id"});case 1:e.createObjectStore("review",{keyPath:"id"});case 2:e.transaction.objectStore("review").createIndex("restaurant","restaurant_id");case 3:e.createObjectStore("unsynced",{autoIncrement:!0})}});class DBHelper{static getRestaurant(e=0){return restaurantDb.then(t=>{const r=t.transaction("restaurant").objectStore("restaurant");let n;return n=0!=e?r.get(Number(e)):r.getAll()}).catch(e=>{console.error(e)})}static storeRestaurant(e){return restaurantDb.then(t=>{const r=t.transaction("restaurant","readwrite");return r.objectStore("restaurant").put(e),r.complete}).catch(e=>{console.error(e)})}static getReview(e=0){return restaurantDb.then(t=>{const r=t.transaction("review").objectStore("review");let n;return n=0!=e?r.get(Number(e)):r.getAll()}).catch(e=>{console.error(e)})}static getRestaurantReviews(e){return restaurantDb.then(t=>{return t.transaction("review").objectStore("review").index("restaurant").getAll(Number(e))}).catch(e=>{console.error(e)})}static getReviewsToSync(){return restaurantDb.then(e=>{return e.transaction("unsynced").objectStore("unsynced").getAll()}).catch(e=>{console.error(e)})}static storeReview(e){return restaurantDb.then(t=>{const r=t.transaction("review","readwrite");return r.objectStore("review").put(e),r.complete}).catch(e=>{console.error(e)})}static storeReviewToSync(e){return restaurantDb.then(t=>{const r=t.transaction("unsynced","readwrite");return r.objectStore("unsynced").add(e),r.complete}).catch(e=>{console.error(e)})}static deleteReviewToSync(e){return restaurantDb.then(t=>{const r=t.transaction("unsynced","readwrite");return r.objectStore("unsynced").delete(e),r.complete}).catch(e=>{console.error(e)})}}
//# sourceMappingURL=../maps/dbhelper.js.map
