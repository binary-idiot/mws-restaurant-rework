importScripts("//rawgit.com/jakearchibald/idb/master/lib/idb.js");var restaurantDb=idb.open("restaurants-db",3,t=>{switch(t.oldVersion){case 0:t.createObjectStore("restaurant",{keyPath:"id"});case 1:t.createObjectStore("review",{keyPath:"id"});case 2:t.transaction.objectStore("review").createIndex("restaurant","restaurant_id")}});class DBHelper{static getRestaurant(t=0){return restaurantDb.then(e=>{const r=e.transaction("restaurant").objectStore("restaurant");let a;return a=0!=t?r.get(Number(t)):r.getAll()}).catch(t=>{console.error(t)})}static storeRestaurant(t){return restaurantDb.then(e=>{const r=e.transaction("restaurant","readwrite");return r.objectStore("restaurant").put(t),r.complete}).catch(t=>{console.error(t)})}static getReview(t=0){return restaurantDb.then(e=>{const r=e.transaction("review").objectStore("review");let a;return a=0!=t?r.get(Number(t)):r.getAll()}).catch(t=>{console.error(t)})}static getRestaurantReviews(t){return restaurantDb.then(e=>{return e.transaction("review").objectStore("review").index("restaurant").getAll(Number(t))}).catch(t=>{console.error(t)})}static storeReview(t){return restaurantDb.then(e=>{const r=e.transaction("review","readwrite");return r.objectStore("review").put(t),r.complete}).catch(t=>{console.error(t)})}}
//# sourceMappingURL=../maps/dbhelper.js.map
